import{r as u,j as c,L as q,R as M}from"./index-BlyaFP9m.js";import{P as f}from"./index-COsmeGCm.js";import{d as C,o as Q,a as I,g as V,u as E,i as U,b as _,s as N}from"./firebaseConfig-yUntQIG3.js";import{a as B}from"./index-C88pvD_q.js";import{o as W}from"./index-CbrGQpiI.js";import{D as Y}from"./DashboardCard-D3lGnPf1.js";import{C as z}from"./CountdownTimer-CgE2Hv8_.js";import"./iconBase-DxbKi1KB.js";import"./LoadingIcon-Dw00p04L.js";const G="https://ipapi.co/json/",k="cached_location",H=60*60*1e3,J=async()=>{try{const o=localStorage.getItem(k);if(o){const{ip:i,location:a,timestamp:r}=JSON.parse(o);if(Date.now()-r<H)return console.log("Using cached location data"),{ip:i,location:a}}const t=await B.get(G),{ip:e,city:s}=t.data,n=s||"Unknown";return localStorage.setItem(k,JSON.stringify({ip:e,location:n,timestamp:Date.now()})),{ip:e,location:n}}catch(o){console.error("Error fetching location:",o);const t=localStorage.getItem(k);if(t){const{ip:e,location:s}=JSON.parse(t);return{ip:e,location:s}}return{ip:"Unknown",location:"Unknown"}}},X=()=>{const[o,t]=u.useState(!1);return c.jsxs("div",{className:"relative inline-block",children:[c.jsx("button",{className:"text-xs text-blue-600 dark:text-blue-400 cursor-pointer underline focus:outline-none",onClick:()=>t(!o),onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),children:"Whatâ€™s this?"}),o&&c.jsx("div",{className:`absolute top-full left-1/2 -translate-x-1/2 bg-gray-800 text-white text-xs rounded-lg 
          px-3 py-2 shadow-md mt-1 w-56 z-10 transition-opacity duration-300`,children:"This counter tracks unique visitor IPs globally."})]})},K=({visitorCount:o,currentLocation:t,lastLocation:e})=>c.jsxs("div",{className:`w-80 min-h-[22rem] flex flex-col shadow-xl rounded-2xl p-5 border border-gray-300 
      dark:border-gray-700 bg-white dark:bg-gray-800 hover:shadow-2xl transition-all duration-300`,children:[c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx(W,{className:"text-4xl mb-2 text-green-600 dark:text-green-400"}),c.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Unique Visitors"}),c.jsx(X,{})]}),c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center mt-3",children:[c.jsx("p",{className:"text-4xl font-bold text-green-600 dark:text-green-400",children:o}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:"People have visited this site!"})]}),c.jsxs("div",{className:"mt-auto",children:[c.jsx("p",{className:"text-sm text-center text-gray-600 dark:text-gray-400",children:"Your Current Location:"}),c.jsx("p",{className:"text-lg font-medium text-gray-800 dark:text-white text-center",children:t})]}),c.jsxs("div",{className:"mt-2",children:[c.jsx("p",{className:"text-sm text-center text-gray-600 dark:text-gray-400",children:"Last Visitor Location:"}),c.jsx("p",{className:"text-lg font-medium text-gray-800 dark:text-white text-center",children:e})]}),c.jsx(q,{to:"/city-visitors",children:c.jsx("button",{className:`flex items-center justify-center w-full bg-gradient-to-r from-green-600 to-green-800 
          text-white px-4 py-2 rounded-lg hover:from-green-500 hover:to-green-700 active:scale-95 transition-all duration-300`,children:"View City Visitors"})})]}),$=()=>{const[o,t]=u.useState(0),[e,s]=u.useState("Fetching..."),[n,i]=u.useState("Unknown");return u.useEffect(()=>{const a=C(I,"users","count"),r=Q(a,l=>{l.exists()&&(t(l.data().count||0),i(l.data().lastLocation||"Unknown"))});return()=>r()},[]),u.useEffect(()=>{(async()=>{try{const{ip:r,location:l}=await J();s(l);const x=C(I,"users","count"),d=await V(x);if(d.exists())if((d.data().ipArray||[]).includes(r)){const v=C(I,"users",r);await E(v,{timestamp:new Date})}else{await E(x,{ipArray:_(r),count:U(1),lastLocation:l});const v=C(I,"users",r);await N(v,{ip:r,location:l,timestamp:new Date,count:1})}else{await N(x,{count:1,ipArray:[r],lastLocation:l});const p=C(I,"users",r);await N(p,{ip:r,location:l,timestamp:new Date,count:1})}}catch(r){console.error("Error registering visitor:",r)}})()},[]),c.jsx(K,{visitorCount:o,currentLocation:e,lastLocation:n})};var D,R;function Z(){if(R)return D;R=1;var o={linear:function(t,e,s,n){var i=s-e;return i*t/n+e},easeInQuad:function(t,e,s,n){var i=s-e;return i*(t/=n)*t+e},easeOutQuad:function(t,e,s,n){var i=s-e;return-i*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,s,n){var i=s-e;return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,s,n){var i=s-e;return i*(t/=n)*t*t+e},easeOutCubic:function(t,e,s,n){var i=s-e;return i*((t=t/n-1)*t*t+1)+e},easeInOutCubic:function(t,e,s,n){var i=s-e;return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,s,n){var i=s-e;return i*(t/=n)*t*t*t+e},easeOutQuart:function(t,e,s,n){var i=s-e;return-i*((t=t/n-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,s,n){var i=s-e;return(t/=n/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,s,n){var i=s-e;return i*(t/=n)*t*t*t*t+e},easeOutQuint:function(t,e,s,n){var i=s-e;return i*((t=t/n-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,s,n){var i=s-e;return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,s,n){var i=s-e;return-i*Math.cos(t/n*(Math.PI/2))+i+e},easeOutSine:function(t,e,s,n){var i=s-e;return i*Math.sin(t/n*(Math.PI/2))+e},easeInOutSine:function(t,e,s,n){var i=s-e;return-i/2*(Math.cos(Math.PI*t/n)-1)+e},easeInExpo:function(t,e,s,n){var i=s-e;return t==0?e:i*Math.pow(2,10*(t/n-1))+e},easeOutExpo:function(t,e,s,n){var i=s-e;return t==n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e},easeInOutExpo:function(t,e,s,n){var i=s-e;return t===0?e:t===n?e+i:(t/=n/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,s,n){var i=s-e;return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOutCirc:function(t,e,s,n){var i=s-e;return i*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOutCirc:function(t,e,s,n){var i=s-e;return(t/=n/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,s,n){var i=s-e,a,r,l;return l=1.70158,r=0,a=i,t===0?e:(t/=n)===1?e+i:(r||(r=n*.3),a<Math.abs(i)?(a=i,l=r/4):l=r/(2*Math.PI)*Math.asin(i/a),-(a*Math.pow(2,10*(t-=1))*Math.sin((t*n-l)*(2*Math.PI)/r))+e)},easeOutElastic:function(t,e,s,n){var i=s-e,a,r,l;return l=1.70158,r=0,a=i,t===0?e:(t/=n)===1?e+i:(r||(r=n*.3),a<Math.abs(i)?(a=i,l=r/4):l=r/(2*Math.PI)*Math.asin(i/a),a*Math.pow(2,-10*t)*Math.sin((t*n-l)*(2*Math.PI)/r)+i+e)},easeInOutElastic:function(t,e,s,n){var i=s-e,a,r,l;return l=1.70158,r=0,a=i,t===0?e:(t/=n/2)===2?e+i:(r||(r=n*(.3*1.5)),a<Math.abs(i)?(a=i,l=r/4):l=r/(2*Math.PI)*Math.asin(i/a),t<1?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*n-l)*(2*Math.PI)/r))+e:a*Math.pow(2,-10*(t-=1))*Math.sin((t*n-l)*(2*Math.PI)/r)*.5+i+e)},easeInBack:function(t,e,s,n,i){var a=s-e;return i===void 0&&(i=1.70158),a*(t/=n)*t*((i+1)*t-i)+e},easeOutBack:function(t,e,s,n,i){var a=s-e;return i===void 0&&(i=1.70158),a*((t=t/n-1)*t*((i+1)*t+i)+1)+e},easeInOutBack:function(t,e,s,n,i){var a=s-e;return i===void 0&&(i=1.70158),(t/=n/2)<1?a/2*(t*t*(((i*=1.525)+1)*t-i))+e:a/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},easeInBounce:function(t,e,s,n){var i=s-e,a;return a=o.easeOutBounce(n-t,0,i,n),i-a+e},easeOutBounce:function(t,e,s,n){var i=s-e;return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,s,n){var i=s-e,a;return t<n/2?(a=o.easeInBounce(t*2,0,i,n),a*.5+e):(a=o.easeOutBounce(t*2-n,0,i,n),a*.5+i*.5+e)}};return D=o,D}var tt=Z();function et(o){return o*Math.PI/180}function h(o,t){return o+Math.random()*(t-o)}function it(o,t){return Math.floor(o+Math.random()*(t-o+1))}var j;(function(o){o[o.Circle=0]="Circle",o[o.Square=1]="Square",o[o.Strip=2]="Strip"})(j||(j={}));var g;(function(o){o[o.Positive=1]="Positive",o[o.Negative=-1]="Negative"})(g||(g={}));const nt=1e3/60;class st{constructor(t,e,s,n){this.getOptions=e;const{colors:i,initialVelocityX:a,initialVelocityY:r}=this.getOptions();this.context=t,this.x=s,this.y=n,this.w=h(5,20),this.h=h(5,20),this.radius=h(5,10),this.vx=typeof a=="number"?h(-a,a):h(a.min,a.max),this.vy=typeof r=="number"?h(-r,0):h(r.min,r.max),this.shape=it(0,2),this.angle=et(h(0,360)),this.angularSpin=h(-.2,.2),this.color=i[Math.floor(Math.random()*i.length)],this.rotateY=h(0,1),this.rotationDirection=h(0,1)?g.Positive:g.Negative}update(t){const{gravity:e,wind:s,friction:n,opacity:i,drawShape:a}=this.getOptions(),r=t/nt;this.x+=this.vx*r,this.y+=this.vy*r,this.vy+=e*r,this.vx+=s*r,this.vx*=n**r,this.vy*=n**r,this.rotateY>=1&&this.rotationDirection===g.Positive?this.rotationDirection=g.Negative:this.rotateY<=-1&&this.rotationDirection===g.Negative&&(this.rotationDirection=g.Positive);const l=.1*this.rotationDirection*r;if(this.rotateY+=l,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=i,this.context.lineCap="round",this.context.lineWidth=2,a&&typeof a=="function")a.call(this,this.context);else switch(this.shape){case j.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case j.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case j.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class rt{constructor(t,e){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenInitTime=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=n=>{this.particles.splice(n,1)},this.getParticle=()=>{const n=h(this.x,this.w+this.x),i=h(this.y,this.h+this.y);return new st(this.context,this.getOptions,n,i)},this.animate=n=>{const{canvas:i,context:a,particlesGenerated:r,lastNumberOfPieces:l}=this,{run:x,recycle:d,numberOfPieces:p,debug:v,tweenFunction:A,tweenDuration:L}=this.getOptions();if(!x)return!1;const O=this.particles.length,y=d?O:r;if(y<p){l!==p&&(this.tweenInitTime=0,this.lastNumberOfPieces=p),this.tweenInitTime+=n;const w=A(this.tweenInitTime,y,p,L),m=Math.round(w-y);for(let b=0;b<m;b++)this.particles.push(this.getParticle());this.particlesGenerated+=m}v&&(a.font="12px sans-serif",a.fillStyle="#333",a.textAlign="right",a.fillText(`Particles: ${O}`,i.width-10,i.height-20));for(let w=this.particles.length-1;w>=0;w--){const m=this.particles[w];m.update(n),(m.y>i.height||m.y<-100||m.x>i.width+100||m.x<-100)&&(d&&y<=p?this.particles[w]=this.getParticle():this.removeParticleAt(w))}return O>0||y<p},this.canvas=t;const s=this.canvas.getContext("2d");if(!s)throw new Error("Could not get canvas context");this.context=s,this.getOptions=e}}const F={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:tt.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class at{constructor(t,e){this.lastFrameTime=0,this.setOptionsWithDefaults=n=>{const i={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...i,...F,...n},Object.assign(this,n.confettiSource)},this.update=(n=0)=>{const{options:{run:i,onConfettiComplete:a,frameRate:r},canvas:l,context:x}=this,d=Math.min(n-this.lastFrameTime,50);if(r&&d<1e3/r){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=n-(r?d%r:0),i&&(x.fillStyle="white",x.clearRect(0,0,l.width,l.height)),this.generator.animate(d)?this.rafId=requestAnimationFrame(this.update):(a&&typeof a=="function"&&this.generator.particlesGenerated>0&&a.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=t;const s=this.canvas.getContext("2d");if(!s)throw new Error("Could not get canvas context");this.context=s,this.generator=new rt(this.canvas,()=>this.options),this.options=e,this.update()}get options(){return this._options}set options(t){var n,i;const e=(n=this._options)==null?void 0:n.run,s=(i=this._options)==null?void 0:i.recycle;this.setOptionsWithDefaults(t),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof t.recycle=="boolean"&&t.recycle&&s===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof t.run=="boolean"&&t.run&&e===!1&&this.update()}}const ot=M.createRef();class S extends M.Component{constructor(t){super(t),this.canvas=M.createRef(),this.canvas=t.canvasRef||ot}componentDidMount(){if(this.canvas.current){const t=P(this.props)[0];this.confetti=new at(this.canvas.current,t)}}componentDidUpdate(){const t=P(this.props)[0];this.confetti&&(this.confetti.options=t)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[t,e]=P(this.props),s={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...e.style};return c.jsx("canvas",{width:t.width,height:t.height,ref:this.canvas,...e,style:s})}}S.defaultProps={...F};S.displayName="ReactConfetti";function P(o){const t={},e={},s={},n=[...Object.keys(F),"confettiSource","drawShape","onConfettiComplete","frameRate"],i=["canvasRef"];for(const a in o){const r=o[a];n.includes(a)?t[a]=r:i.includes(a)?i[a]=r:s[a]=r}return[t,s,e]}const ct=M.forwardRef((o,t)=>c.jsx(S,{canvasRef:t,...o}));f.number;const T=({numberOfPieces:o=500})=>{const[t,e]=u.useState({width:window.innerWidth,height:window.innerHeight}),[s,n]=u.useState(!0);return u.useEffect(()=>{const i=()=>{requestAnimationFrame(()=>{e({width:window.innerWidth,height:window.innerHeight})})};window.addEventListener("resize",i);const a=setTimeout(()=>n(!1),5e3);return()=>{clearTimeout(a),window.removeEventListener("resize",i)}},[]),s?c.jsx(ct,{width:t.width,height:t.height,numberOfPieces:o,gravity:.1,wind:.02,opacity:.9,recycle:!1,colors:["#FFD700","#FF69B4","#00FFFF","#FFFFFF","#FF4500"]}):null};T.propTypes={numberOfPieces:f.number};const lt=()=>c.jsxs("div",{className:"p-6 text-center",children:[c.jsx("h2",{className:"text-4xl font-bold text-yellow-500 dark:text-yellow-400",children:"ðŸŽ‰ Eid Mubarak! ðŸŒ™âœ¨"}),c.jsx("p",{className:"mt-4 text-lg text-gray-700 dark:text-gray-300",children:"Wishing you and your family joy, peace, and prosperity on this blessed occasion. May your Eid be filled with love and happiness!"})]});function ht({dashboardData:o}){const t=new Date("2025-03-31").getTime(),e=new Date("2025-04-01").getTime(),[s,n]=u.useState(Date.now()),[i,a]=u.useState(!1);return u.useEffect(()=>{const r=setInterval(()=>{n(Date.now())},1e3);return()=>clearInterval(r)},[]),u.useEffect(()=>{s>=t&&s<=e&&a(!0)},[s,t,e]),c.jsxs("div",{className:"p-6 bg-gradient-to-b from-gray-50 to-gray-100 min-h-screen dark:from-gray-800 dark:to-gray-900",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"flex justify-center items-center font-bold text-2xl md:text-3xl space-x-2 mt-5",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("img",{src:"QalbConnect_Light.svg",alt:"QalbConnect Logo",className:"h-10 w-10 block dark:hidden"}),c.jsx("img",{src:"QalbConnect_Dark.svg",alt:"QalbConnect Logo",className:"h-10 w-10 hidden dark:block"})]}),c.jsx("span",{className:"text-gray-800 dark:text-white",children:"Welcome to QalbConnect"})]}),c.jsx("div",{className:"flex justify-center",children:c.jsx("hr",{className:"w-full sm:w-2/5 md:w-1/3 mt-3 mb-6 border-gray-400 dark:border-gray-600"})})]}),c.jsx("p",{className:"text-md text-center text-gray-700 dark:text-gray-300 mb-8 pb-4 md:pb-8",children:"Welcome to the Islamic Dashboard. Here you can find a collection of Islamic resources, including daily duas, supplications, and more. Use the navigation menu to explore the content and enhance your spiritual journey. May you find peace and tranquility in your daily practice."}),s<t&&c.jsx("div",{className:"text-center",children:c.jsx(z,{targetTime:"2025-03-31",label:"Eid in"})}),i&&c.jsxs("div",{className:"text-center",children:[c.jsx(T,{numberOfPieces:50,recycle:!1,tweenDuration:1e3}),c.jsx(lt,{})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 w-full px-6 sm:px-8 md:px-10 mt-8",children:[o.map((r,l)=>c.jsx(Y,{title:r.title,desc:r.desc,link:r.link,icon:r.icon,fact:r.fact,tagline:r.tagline},l)),c.jsx($,{})]})]})}ht.propTypes={dashboardData:f.arrayOf(f.shape({title:f.string.isRequired,desc:f.string.isRequired,link:f.string.isRequired,icon:f.string.isRequired,fact:f.string,tagline:f.string})).isRequired};export{ht as default};
