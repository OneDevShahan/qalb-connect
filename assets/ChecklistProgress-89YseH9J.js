import{j as e,C as u,r as m}from"./index-BlyaFP9m.js";import{P as r}from"./index-COsmeGCm.js";import{f as C}from"./AlAdhaanServices-DO0sKTNN.js";import"./index-C88pvD_q.js";const f=({completion:s})=>e.jsxs("div",{className:"mt-6 text-center",children:[e.jsxs("h3",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:["Overall Completion: ",s,"%"]}),e.jsx("div",{className:"w-full bg-gray-300 dark:bg-gray-700 rounded-full h-4 mt-2",children:e.jsx("div",{className:"h-4 rounded-full bg-green-500 transition-all",style:{width:`${s}%`}})})]});f.propTypes={completion:r.number.isRequired};const k=({data:s,todayRamadhanDay:l})=>{const{day:a,percentage:x,checklist:y}=s;return console.log("ðŸ“… Day:",a,"ðŸ“ˆ Ramdhan Day:",l),e.jsxs("tr",{className:"border-b border-gray-300 dark:border-gray-600 text-center text-sm md:text-base",children:[e.jsx("td",{className:`p-2 font-bold dark:text-white ${l===a?"text-blue-600 dark:text-blue-400":""}`,children:l===a?`ðŸ”¥ Today (${a})`:`ðŸ“… Day ${a}`}),e.jsx("td",{className:"p-2 font-semibold dark:text-white",children:x===100?"ðŸŒŸ Completed!":`ðŸ“ˆ ${x}%`}),e.jsx("td",{className:"p-2",children:e.jsx("div",{className:"grid grid-cols-2 gap-2 md:grid-cols-3 lg:grid-cols-4",children:u.map(({text:c,icon:n})=>e.jsxs("span",{className:`cursor-pointer ${y[c]?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[e.jsx("span",{className:"sm:hidden",children:c}),e.jsxs("span",{className:"hidden sm:inline-flex items-center gap-1",children:[n," ",c]})]},c))})})]})};k.propTypes={data:r.shape({day:r.number.isRequired,percentage:r.number.isRequired,checklist:r.object.isRequired}).isRequired,todayRamadhanDay:r.number.isRequired,updateChecklist:r.func.isRequired};const N=({dailyProgress:s,todayRamadhanDay:l})=>e.jsx("div",{className:"overflow-x-auto mt-6",children:e.jsxs("table",{className:"w-full border-collapse shadow-lg",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("th",{className:"p-2 border-b dark:border-gray-600",children:"Day"}),e.jsx("th",{className:"p-2 border-b dark:border-gray-600",children:"Progress"}),e.jsx("th",{className:"p-2 border-b dark:border-gray-600",children:"Checklist"})]})}),e.jsx("tbody",{children:s.length>0?s.map(a=>a?e.jsx(k,{data:a,todayRamadhanDay:l},a.day):null):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center text-gray-500 dark:text-gray-300 p-4",children:"No progress data available"})})})]})});N.propTypes={dailyProgress:r.arrayOf(r.shape({day:r.number.isRequired,percentage:r.number.isRequired,checklist:r.object.isRequired})).isRequired,todayRamadhanDay:r.number.isRequired,updateChecklist:r.func.isRequired};const w=({latitude:s,longitude:l})=>{const[a,x]=m.useState([]),[y,c]=m.useState(0),[n,R]=m.useState(null),[D,j]=m.useState(!0);return m.useEffect(()=>{(async()=>{var i,o,t;j(!0);const d=await C(s,l);if(d){const g=parseInt((t=(o=(i=d==null?void 0:d.data)==null?void 0:i.date)==null?void 0:o.hijri)==null?void 0:t.day,10);R(g||null)}j(!1)})()},[s,l]),m.useEffect(()=>{if(n===null)return;let p=0,d=[];for(let i=1;i<=30;i++){const o=localStorage.getItem(`ramadhanChecklistDay${i}`);let t={},g=[],b=0;o?(t=JSON.parse(o),u.forEach(({text:h})=>{h in t||(t[h]=!1)}),g=Object.keys(t).filter(h=>t[h]),b=Math.round(g.length/u.length*100),p+=b):t=u.reduce((h,{text:v})=>({...h,[v]:!1}),{}),d.push({day:i,percentage:b,checklist:t}),o||localStorage.setItem(`ramadhanChecklistDay${i}`,JSON.stringify(t))}x(d.length>0?d:[]),c(Math.round(p/30))},[n]),e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-center text-gray-900 dark:text-gray-100",children:"ðŸ“… Ramadhan Progress Tracker"}),e.jsx("p",{className:"text-center text-gray-600 dark:text-gray-300 mt-2",children:"Track your progress throughout Ramadhan and see how much youâ€™ve achieved!"}),D?e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-300 mt-4",children:"Loading Hijri Date..."}):n?e.jsx("div",{className:"text-center mt-4",children:e.jsxs("h3",{className:"text-lg font-semibold text-blue-600 dark:text-blue-400",children:["ðŸ“… Today is Ramadhan Day ",n]})}):e.jsx("p",{className:"text-center text-red-500 dark:text-red-400 mt-4",children:"Unable to determine today's Ramadhan day."}),e.jsx(f,{completion:y}),e.jsx(N,{dailyProgress:a,todayRamadhanDay:n})]})};export{w as default};
